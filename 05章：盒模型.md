**目录：**

- [5. 盒模型](#5-盒模型)
  - [5.1. 盒子尺寸](#51-盒子尺寸)
  - [5.2. 外边距长度](#52-外边距长度)
    - [5.2.1. 外边距折叠](#521-外边距折叠)
  - [5.3. 内边距长度](#53-内边距长度)
  - [5.4. 边框属性](#54-边框属性)
    - [5.4.1. 边框长度](#541-边框长度)
    - [5.4.2. 边框颜色](#542-边框颜色)
    - [5.4.3. 边框样式](#543-边框样式)
    - [5.4.4. border 简写属性](#544-border-简写属性)

# 5. 盒模型

本章阐述盒模型。CSS 盒模型描述了文档树中的元素生成的矩形框，并根据视觉格式化模型进行布局。

## 5.1. 盒子尺寸

每个盒子都有一个内容区（如文本、图像等）和可选的内边距、边框和外边距。每个区域的大小由下面定义的属性指定。下图显示了这些区域的关系，以及用来指代这些区域的术语。

![盒模型](illustrations/boxdim.png)

外边距、边框和内边距可以细分为上、右、下、左四个部分（例如，在图中，"LM" 表示左外边距，"RP" 表示右内边距，"TB" 表示上边框，等等）。

四个区域（内容、内边距、边框和外边距）中的每个区域的周长被称为 "边缘"，因此每个盒子都有四个边缘。

- **内容边缘或内边**
  内容边缘围绕着盒子的宽度和高度所给出的矩形，这往往取决于元素的渲染内容。四条内容边缘定义了盒子的 **内容盒**。
- **内边距边缘**
  内边距边缘围绕着盒子的内边距。如果内边距的宽度为 0，则内边距边缘与内容边缘相同。四个内边距边缘定义了盒子的 **内边距盒**。
- **边框边缘**
  边框边缘围绕着盒子的边框。如果边框的宽度为 0，则边框边缘与内边距边缘相同。四条边框边缘定义了盒子的 **边框盒子**。
- **边距边或外边**
  外边距边缘围绕着盒子的外边距。如果外边距的宽度为 0，那么外边距边缘与边框边缘相同。四条外边距边缘定义了盒子的 **外边距盒子**。

每种边缘都可以细分为上、右、下、左四个边缘。

盒子的内容区的尺寸--内容宽度和内容高度--取决于几个因素：生成盒子的元素是否设置了 "width" 或 "height"属性，盒子是否包含文本或其他盒子，盒子是否是一个表格，等等。盒子的宽度和高度将在视觉格式化模型章节中讨论。

盒子的内容、内边距和边框区域的背景样式由生成元素的 "background" 属性指定。外边距的背景总是透明的。

## 5.2. 外边距长度

外边距属性指定一个盒子的外边距区域的宽度。margin 简写属性设置了所有四边的外边距，而其他的外边距属性只设置了各自的边。这些属性适用于所有元素，但垂直外边距不会对非替换的内联元素产生任何影响。

本节中定义的属性指的是 `<margin-width>` 值类型，它可以取以下值之一。

`<margin-width>` 的值类型，它可以采取以下值之一：

- `<length>`
  指定一个固定的宽度。

- `<percentage>`
  该百分比是相对于生成盒的包含块的宽度计算的。注意，这对 'margin-top' 和 'margin-bottom' 也是如此。

- auto
  参见第 7 章的 "计算宽度和外边距行为" 部分。

margin 属性的负值是允许的，但可能有特定的实施限制。

| 属性名   | margin-top, margin-bottom                                                            |
| -------- | ------------------------------------------------------------------------------------ | -------- |
| 值       | `<margin-width>                                                                      | inherit` |
| 初始值   | 0                                                                                    |
| 适用元素 | 所有元素，但具有除 table-caption、table 和 inline-table 以外的表格显示类型的元素除外 |
| 可继承   | 否                                                                                   |
| 百分数   | 相对于包含块的 width 属性值                                                          |
| 计算值   | 指定的百分数或绝对长度                                                               |

这些属性对非替换性行内元素没有效果：

| 属性名   | margin-left, margin-right                                                            |
| -------- | ------------------------------------------------------------------------------------ | -------- |
| 值       | `<margin-width>                                                                      | inherit` |
| 初始值   | 0                                                                                    |
| 适用元素 | 所有元素，但具有除 table-caption、table 和 inline-table 以外的表格显示类型的元素除外 |
| 可继承   | 否                                                                                   |
| 百分数   | 相对于包含块的 width 属性值                                                          |
| 计算值   | 指定的百分数或绝对长度                                                               |

| 属性名   | margin                                                                               |
| -------- | ------------------------------------------------------------------------------------ | -------- |
| 值       | `<margin-width>{1,4}                                                                 | inherit` |
| 初始值   | 0                                                                                    |
| 适用元素 | 所有元素，但具有除 table-caption、table 和 inline-table 以外的表格显示类型的元素除外 |
| 可继承   | 否                                                                                   |
| 百分数   | 相对于包含块的 width 属性值                                                          |
| 计算值   | 指定的百分数或绝对长度                                                               |

margin 属性是一个简写属性，用于在样式表的同一位置设置 "margin-top"、"margin-right"、"margin-bottom "和 "margin-left"。

如果只有一个组件值，它适用于所有的边。如果有两个值，顶部和底部的边距被设置为第一个值，而右侧和左侧的边距被设置为第二个值。如果有三个值，顶部被设置为第一个值，左边和右边被设置为第二个值，底部被设置为第三个值。如果有四个值，它们分别适用于顶部、右侧、底部和左侧。

```css
body {
  margin: 2em;
} /* 所有边距都设置为2em */
body {
  margin: 1em 2em;
} /* 顶部和底部=1em，右侧和左侧=2em */
body {
  margin: 1em 2em 3em;
} /* 顶部=1em，右侧=2em /* top=1em, right=2em, bottom=3em, left=2em */
```

上面例子的最后一条规则等同于下面的例子。

```css
body {
  margin-top: 1em;
  margin-right: 2em;
  margin-bottom: 3em;
  margin-left: 2em; /*从对面（右边）复制过来 */
}
```

### 5.2.1. 外边距折叠

在 CSS 中，两个或多个盒（可能是也可能不是同级别的）的相邻外边距可以合并成一个外边距。以这种方式组合的外边距被称为折叠，由此产生的组合外边距被称为 **折叠外边距**。

相邻的垂直外边距会折叠，除了以下情况：

- 根元素盒子的外边距不会折叠。
- 如果一个有间隙的元素的顶部和底部外边距是相邻的，它的外边距就会与下面的兄弟元素的相邻外边距一起折叠，但产生的外边距不会与父块的底部外边距一起折叠。
- 如果一个具有非 0 计算的 "min-height" 和 "auto" 计算的 "height" 的盒子的顶部外边距与它的最后一个 in-flow 子块的底部外边距折叠，那么子块的底部外边距不会与父块的底部外边距折叠。

水平外边距永远不会折叠。

两个边距是 **相邻的**，当且仅当：

- 两者都属于参与同一块格式化环境的 in-flow 块级盒子
- 没有线框，没有间隙，没有填充物，也没有边框将它们分开（注意，某些 0 高度的线框（见 9.4.2）在此被忽略）。
- 两者都属于垂直相邻的方框边缘，即形成以下一对之一：
  - 盒子的上边缘和它的第一个 in-flow 子的上边缘
  - 盒子的底边和它的下一个 in-flow 兄弟姐妹的顶边
  - 如果父元素有 "auto" 计算的高度，最后一个 in-flow 子方的底边和父方的底边
  - 没有建立一个新的块格式化上下文，并且计算的 "min-height" 为 0，计算的 "height" 为 0 或 "auto"，并且没有 in-flow 子代的盒子的顶部和底部外边距。

如果一个折叠的边距与另一个边距相邻，它的任何组成部分的边距都被视为与该边距相邻。

注意。邻接边距可以由没有兄弟或父关系的元素产生。

注意上述规则意味着：

- 浮动盒子和任何其他框之间的边距不会折叠（甚至在浮动框和它的 in-flow 子之间也不会折叠）。
- 建立新的块格式化上下文的元素（如浮动和具有 "可见 "以外的 "溢出 "的元素）的边距不会与它们的 in-flow 子代一起折叠。
- 绝对定位的方框的边距不会折叠（甚至不会与它们的 in-flow 子元素折叠）。
- inline-block 框的边距不会折叠（甚至不会与它们的 in-flow 子集一起折叠）。
- 一个 in-flow 块级元素的底边距总是与它的下一个 in-flow 块级同级元素的顶边距一起折叠，除非该同级元素有间隙。
- 如果一个 in-flow 块元素没有上边框，没有顶部填充，并且该元素没有间隙，那么该元素的上边距将与它的第一个 in-flow 块级子元素的上边距一起折叠。
- 高度为'auto'的 in-flow 块框的底边距与它的最后一个 in-flow 块级子元素的底边距一起折叠，如果：
  - 盒子没有底部填充物，以及
  - 盒子没有底部边框，以及
  - 子节点的底边距既不会与有间隙的顶边距一起折叠，也不会（如果盒子的最小高度不为 0）与盒子的顶边距一起折叠。
- 如果一个盒子的 "最小高度 "属性为 0，并且它既没有顶部或底部边框，也没有顶部或底部填充物，并且它的 "高度 "为 0 或 "自动"，并且它不包含一个线框，并且它的所有 in-flow 子的边框（如果有的话）都会折叠。

当两个或多个边距折叠时，产生的边距宽度是折叠的边距宽度的最大值。如果是负的边距，负的相邻边距的绝对值的最大值将从正的相邻边距的最大值中扣除。如果没有正边距，相邻边距的绝对值的最大值被从 0 中扣除。

如果一个盒子的顶部和底部的边距是相邻的，那么边距有可能通过它折叠。在这种情况下，元素的位置取决于它与其他元素的边距被折叠的关系：

- 如果元素的边距与它的父元素的上边距一起折叠，那么盒子的上边框边缘就被定义为与父元素的边框相同。
- 否则，要么元素的父级不参与边际折叠，要么只涉及父级的底边。元素的上边框边缘的位置与该元素有非 0 下边框时的位置相同。

注意，被折叠过的元素的位置对其他元素的位置没有影响，它们的外边距被折叠了。顶层边框边缘的位置只在放置这些元素的子元素时需要。

## 5.3. 内边距长度

内边距属性指定了一个盒子的内边距区域的宽度。padding 简写属性设置了所有四边的内边距，而其他内边距属性只设置各自的一边。

本节中定义的属性指的是`<padding-width>`值类型，它可以取以下值之一。

- `<length>`
  指定一个固定的宽度。

- `<percentage>`
  百分比是相对于生成的框的包含块的宽度计算的，即使是 'padding-top' 和 'padding-bottom'。

与外边距属性不同，内边距的值不能是负数。和外边距属性一样，内边距属性的百分数指的是生成盒子的包含块的宽度。

| 属性名   | padding-top, padding-right, padding-bottom, padding-left                                                                   |
| -------- | -------------------------------------------------------------------------------------------------------------------------- | -------- |
| 值       | `<padding-width>                                                                                                           | inherit` |
| 初始值   | 0                                                                                                                          |
| 适用元素 | 除了 table-row-group、table-header-group、table-footer-group、table-row、table-column-group 和 table-column 以外的所有元素 |
| 可继承   | 否                                                                                                                         |
| 百分数   | 相对于包含块的 width 属性值                                                                                                |
| 计算值   | 指定的百分数或绝对长度                                                                                                     |

| 属性名   | padding                                                                                                                    |
| -------- | -------------------------------------------------------------------------------------------------------------------------- | -------- |
| 值       | `<padding-width>{1,4}                                                                                                      | inherit` |
| 初始值   | 0                                                                                                                          |
| 适用元素 | 除了 table-row-group、table-header-group、table-footer-group、table-row、table-column-group 和 table-column 以外的所有元素 |
| 可继承   | 否                                                                                                                         |
| 百分数   | 相对于包含块的 width 属性值                                                                                                |
| 计算值   | 指定的百分数或绝对长度                                                                                                     |

padding 属性是一个简写属性，用于在样式表的同一位置设置 'padding-top'、'padding-right'、'padding-bottom'和'padding-left'。

如果只有一个组件值，它适用于所有的边。如果有两个值，顶部和底部的内边距被设置为第一个值，右侧和左侧的内边距被设置为第二个值。如果有三个值，顶部被设置为第一个值，左右被设置为第二个，底部被设置为第三个。如果有四个值，它们分别适用于顶部、右侧、底部和左侧。

内边距区域的表面颜色或图像是通过 "background" 属性指定的。

```css
h1 {
  background: white;
  padding: 1em 2em;
}
```

上面的例子指定了一个'1em'的垂直内边距（'padding-top'和'padding-bottom'）和一个'2em'的水平内边距（'padding-right'和'padding-left'）。em 单位是相对于元素的字体大小而言的：'1em' 等于使用的字体大小。

## 5.4. 边框属性

### 5.4.1. 边框长度

### 5.4.2. 边框颜色

### 5.4.3. 边框样式

### 5.4.4. border 简写属性
