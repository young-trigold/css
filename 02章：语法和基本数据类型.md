**目录：**

- [2. 语法和基本数据类型](#2-语法和基本数据类型)
  - [2.1. 语法](#21-语法)
    - [2.1.1. 符号化](#211-符号化)
    - [2.1.2. 关键字](#212-关键字)
      - [2.1.2.1. 厂商前缀](#2121-厂商前缀)
    - [2.1.3. 字符和大小写](#213-字符和大小写)
  - [2.2. 语句](#22-语句)
  - [2.3. at 规则](#23-at-规则)
    - [2.3.1. 块](#231-块)
    - [2.3.2. 规则集，声明块和选择器](#232-规则集声明块和选择器)
    - [2.3.3. 声明和属性](#233-声明和属性)
    - [2.3.4. 注释](#234-注释)
  - [2.4. 值](#24-值)
    - [2.4.1. 整数和实数](#241-整数和实数)
    - [2.4.2. 长度](#242-长度)
      - [2.4.2.1. 绝对单位](#2421-绝对单位)
      - [2.4.2.2. 相对单位](#2422-相对单位)
    - [2.4.3. 百分数](#243-百分数)
    - [2.4.4. URL](#244-url)
    - [2.4.5. 颜色](#245-颜色)
    - [2.4.6. 字符串](#246-字符串)
    - [2.4.7. 角度](#247-角度)
    - [2.4.8. 时间](#248-时间)

# 2. 语法和基本数据类型

## 2.1. 语法

本节描述了任何级别的 CSS（包括 CSS 2.2）所共有的语法（以及向前兼容的解析规则）。未来的 CSS 更新将遵守这一核心语法，尽管它们可能会增加额外的语法约束。

这些描述是规范性的。

在本规范中，"紧接在前" 或 "紧接在后" 的表述是指没有中间的空白或注释。

### 2.1.1. 符号化

所有级别的 CSS--level 1、level 2 和任何未来的级别--都使用相同的核心语法。这使得用户代理能够解析（尽管不能完全理解）用 CSS 级别编写的样式表，而这些级别在用户代理创建时还不存在。设计师可以利用这一特点来创建适用于较早的用户代理的样式表，同时也可以利用最新级别的 CSS 的可能性。

在词法层面上，CSS 样式表由一连串的词法单元组成。CSS 的词法单元列表如下。这些定义使用 Lex 风格的正则表达式。八进制代码参考了 ISO 10646（[ISO10646]）。和 Lex 一样，在有多个匹配的情况下，最长的匹配决定了标记。

| 词法单元      | 定义                                                         |
| ------------- | ------------------------------------------------------------ | ------------------------------ | ---------------------- | ---------------------- | ---------------------- | ---------------------- | -------------- | ------------------------------- |
| IDENT         | `{ident}`                                                    |
| ATKEYWORD     | `@{ident}`                                                   |
| STRING        | `{string}`                                                   |
| BAD_STRING    | `{badstring}`                                                |
| BAD_URI       | `{baduri}`                                                   |
| BAD_COMMENT   | `{badcomment}`                                               |
| HASH          | `#{name}`                                                    |
| NUMBER        | `{num}`                                                      |
| PERCENTAGE    | `{num}%`                                                     |
| DIMENSION     | `{num}{ident}`                                               |
| URI           | `{U}{R}{L}\({w}{string}{w}\)                                 | {U}{R}{L}\({w}([!#$%&*-\[\]-~] | {nonascii}             | {escape})\*{w}\)`      |
| UNICODE-RANGE | `u\+[?]{1,6}                                                 | u\+[0-9a-f]{1}[?]{0,5}         | u\+[0-9a-f]{2}[?]{0,4} | u\+[0-9a-f]{3}[?]{0,3} | u\+[0-9a-f]{4}[?]{0,2} | u\+[0-9a-f]{5}[?]{0,1} | u\+[0-9a-f]{6} | u\+[0-9a-f]{1,6}-[0-9a-f]{1,6}` |
| CDO           | `<!--`                                                       |
| CDC           | `-->`                                                        |
| :             | `:`                                                          |
| ;             | `;`                                                          |
| {             | `\{`                                                         |
| }             | `\}`                                                         |
| (             | `\(`                                                         |
| )             | `\)`                                                         |
| [             | `\[`                                                         |
| ]             | `\]`                                                         |
| S             | `[ \t\r\n\f]+`                                               |
| COMMENT       | `\/\*[^*]*\*+([^/*][^*]*\*+)*\/`                             |
| FUNCTION      | `{ident}\(`                                                  |
| INCLUDES      | `~=`                                                         |
| DASHMATCH     | `                                                            | =`                             |
| DELIM         | 任何未被上述规则匹配的其他字符，并且既不是单引号也不是双引号 |

上面大括号（{}）中的宏定义如下:

| 宏          | 定义                           |
| ----------- | ------------------------------ | -------------------------------- | --------------- | ------------- | ---- |
| ident       | `[-]?{nmstart}{nmchar}*`       |
| name        | `{nmchar}+`                    |
| nmstart     | `[_a-z]                        | {nonascii}                       | {escape}`       |
| nonascii    | `[^\0-\177]`                   |
| unicode     | `\\[0-9a-f]{1,6}(\r\n          | [ \n\r\t\f])?`                   |
| escape      | `{unicode}                     | \\[^\n\r\f0-9a-f]`               |
| nmchar      | `[_a-z0-9-]                    | {nonascii}                       | {escape}`       |
| num         | `[+-]?([0-9]+                  | [0-9]\*\.[0-9]+)(e[+-]?[0-9]+)?` |
| string      | `{string1}                     | {string2}`                       |
| string1     | `\"([^\n\r\f\\"]               | \\{nl}                           | {escape})\*\"`  |
| string2     | `\'([^\n\r\f\\']               | \\{nl}                           | {escape})\*\'`  |
| badstring   | `{badstring1}                  | {badstring2}`                    |
| badstring1  | `\"([^\n\r\f\\"]               | \\{nl}                           | {escape})\*\\?` |
| badstring2  | `\'([^\n\r\f\\']               | \\{nl}                           | {escape})\*\\?` |
| badcomment  | `{badcomment1}                 | {badcomment2}`                   |
| badcomment1 | `\/\*[^*]*\*+([^/*][^*]*\*+)*` |
| badcomment2 | `\/\*[^*]*(\*+[^/*][^*]*)*`    |
| baduri      | `{baduri1}                     | {baduri2}                        | {baduri3}`      |
| baduri1     | `{U}{R}{L}\({w}([!#$%&*-~]     | {nonascii}                       | {escape})\*{w}` |
| baduri2     | `{U}{R}{L}\({w}{string}{w}`    |
| baduri3     | `{U}{R}{L}\({w}{badstring}`    |
| nl          | `\n                            | \r\n                             | \r              | \f`           |
| w           | `[ \t\r\n\f]*`                 |
| L           | `l                             | \\0{0,4}(4c                      | 6c)(\r\n        | [ \t\r\n\f])? | \\l` |
| R           | `r                             | \\0{0,4}(52                      | 72)(\r\n        | [ \t\r\n\f])? | \\r` |
| U           | `u                             | \\0{0,4}(55                      | 75)(\r\n        | [ \t\r\n\f])? | \\u` |

例如，最长匹配规则意味着 "red-->"被标记为 IDENT "red--"后面是 DELIM">"，而不是 IDENT 后面是 CDC。

下面是 CSS 的核心语法。接下来的章节描述了如何使用它。附录 G 描述了一个更严格的语法，它更接近于 CSS 2 级语言。样式表中可以根据这个语法解析的部分，但不能根据附录 G 中的语法解析的部分，根据处理解析错误的规则，将被忽略。

| 语法单元 | 定义                             |
| -------- | -------------------------------- | ---------------- | ----------------- | ------------------ | -------- | ----- | --- | ---- | ------------- | -------- | --------- | --- | ----------------- | ------------- | ------------ | ------------- | ------------ | ----------------- |
| 样式表   | `[ CDO                           | CDC              | S                 | 语句 ]\*`          |
| 语句     | `规则集                          | at 规则`         |
| at 规则  | `ATKEYWORD S* any* [ 块          | ';' S\* ]`       |
| 块       | `'{' S\* [ any                   | 块               | ATKEYWORD S\*     | ';' S* ]* '}' S\*` |
| 规则集   | `选择器? '{' S* 声明列表 '}' S*` |
| 声明列表 | `声明 [ ';' S* 声明列表 ]?       | at 规则 声明列表 | /_ empty _/`      |
| 选择器   |                                  | `any+`           |
| 声明     | `属性 S* ':' S* 值`              |
| 属性     | `IDENT`                          |
| 值       | `[ any                           | 块               | ATKEYWORD S\* ]+` |
| any      | `[ IDENT                         | NUMBER           | PERCENTAGE        | DIMENSION          | STRING   | DELIM | URI | HASH | UNICODE-RANGE | INCLUDES | DASHMATCH | ':' | FUNCTION S\* [any | unused]\* ')' | '(' S\* [any | unused]\* ')' | '[' S\* [any | unused]_ ']'] S_` |
| unused   | `块                              | ATKEYWORD S\*    | ';' S\*           | CDO S\*            | CDC S\*` |

在 CSS 中没有使用 "unused" 语法产生式，将来也不会被任何扩展使用。它被包括在这里只是为了帮助处理错误。

COMMENT（注释）标记没有出现在语法中（以保持其可读性），但是任何数量的这些标记都可以出现在其他标记之外的任何地方。（但是请注意，在@charset 规则之前或之内的注释会禁用@charset）。

上述语法中的标记 S 代表空白。只有 "空格"（U+0020）、"制表"（U+0009）、"换行"（U+000A）、"回车"（U+000D）和 "换页"（U+000C）这些字符可以出现在空白处。其他类似空间的字符，如 "em-space"（U+2003）和 "ideographic space"（U+3000），从来不是空白空间的一部分。

在 CSS 2.2 中没有定义不能被此法单元或解析的输入的含义。

### 2.1.2. 关键字

关键词具有标识符的形式。关键词不能放在引号（"... "或'...'）之间。因此。

red 是一个关键词，但 "red"不是。(它是一个字符串。) 其他非法的例子：

```css
width: 'auto';
border: 'none';
background: 'red';
```

#### 2.1.2.1. 厂商前缀

在 CSS 中，标识符可以以'-'（破折号）或 '\_'（下划线）开头。以'-'或 '\_' 开头的关键词和属性名称被保留给厂商特定的扩展。这种厂商特定的扩展应该有以下格式之一：

```
'-' + 厂商标识符 + '-' + 有意义的名称
'_' + 厂商标识符 + '-' + 有意义的名称
```

例如，如果 XYZ 组织添加了一个属性来描述显示器东侧边框的颜色，他们可能称之为 -xyz-border-east-color。

其他已知的例子：

```css
-moz-box-sizing
-moz-border-radius
-wap-accesskey
```

首字母破折号或下划线被保证永远不会被任何当前或未来级别的 CSS 使用在属性或关键字中。因此，典型的 CSS 实现可能无法识别这样的属性，并可能根据处理解析错误的规则而忽略它们。然而，由于最初的破折号或下划线是语法的一部分，CSS 2.2 的实现者应该总是能够使用符合 CSS 标准的解析器，无论他们是否支持任何厂商的特定扩展。

作者应该避免厂商的特定扩展。

下表总结了常见的厂商前缀。

| 浏览器            | 前缀     |
| ----------------- | -------- |
| Chrome, Safari    | -webkit- |
| Opera             | -o-      |
| Firefox           | -moz-    |
| Internet Explorer | -ms-     |

### 2.1.3. 字符和大小写

以下规则始终有效。

所有的 CSS 语法在 ASCII 范围内是不区分大小写的（即[a-z]和[A-Z]是等同的），但不在 CSS 控制范围内的部分除外。例如，HTML 属性 "id "和 "class "的值、字体名称和 URI 的大小写敏感性不在本规范的范围之内。特别要注意的是，元素名称在 HTML 中是不区分大小写的，但在 XML 中是区分大小写的。

在 CSS 中，标识符（包括选择器中的元素名、类和 ID）只能包含字符[a-zA-Z0-9]和 ISO 10646 字符 U+0080 及以上，加上连字符（-）和下划线（\_）；它们不能以数字、两个连字符或连字符后的数字开头。标识符也可以包含转义字符和任何作为数字代码的 ISO 10646 字符（见下一项）。例如，标识符 "B&W？"可以写成 "B\&W\？"或 "B\26 W\3F"。
请注意，Unicode 的编码与 ISO10646 相当（见[UNICODE]和[ISO10646]）。

在 CSS 2.2 中，反斜杠（\）字符可以表示三种类型的字符转义之一。在一个 CSS 注释中，反斜杠代表它自己，如果反斜杠紧跟在样式表的末尾，它也代表它自己（即 DELIM 标记）。

首先，在一个字符串内，一个反斜杠后面的换行被忽略（即，字符串被认为不包含反斜杠或换行）。在字符串外部，反斜线后的换行代表其本身（即 DELIM 后的换行）。

第二，它取消了特殊 CSS 字符的意义。任何字符（除了十六进制数字、换行、回车或换页）都可以用反斜杠转义，以消除其特殊含义。例如，"\"是一个由一个双引号组成的字符串。样式表预处理器不能从样式表中删除这些反斜线，因为那会改变样式表的含义。

第三，反斜杠转义允许作者参考他们不容易放在文档中的字符。在这种情况下，反斜杠后面最多有六个十六进制数字（0...9A...F），这些数字代表 ISO 10646（[ISO10646]）字符，这个数字不能是零。(在 CSS 2.2 中没有定义如果一个样式表确实包含一个 Unicode 代码点为 0 的字符会发生什么。) 如果在十六进制数字后面有一个范围为[0-9a-fA-F]的字符，那么这个数字的结尾需要明确。有两种方法可以做到这一点。

用一个空格（或其他空白字符）。"\26 b"（"&b"）。在这种情况下，用户代理应将 "CR/LF "对（U+000D/U+000A）视为一个白色空格字符。

通过提供正好 6 个十六进制数字。"\000026b" ("&b")。

事实上，这两种方法可以结合使用。在十六进制转义之后，只有一个空白字符被忽略。请注意，这意味着转义序列后的 "真实 "空格必须是双倍的。

如果数字超出了 Unicode 允许的范围（例如"\110000 "高于当前 Unicode 允许的最大 10FFFF），UA 可以用 "替换字符"（U+FFFD）替换转义。如果要显示该字符，UA 应该显示一个可见的符号，比如 "缺失字符 "字形（参见 15.2，第 5 点）。

注意：反斜线转义总是被认为是标识符或字符串的一部分（即"\7B" 不是标点符号，尽管 "{" 是，而"\32" 允许放在类名的开头，尽管 "2" 不是）。

标识符 "te/st "与 "test "是完全相同的标识符。

## 2.2. 语句

一个 CSS 样式表，对于任何级别的 CSS 来说，都是由一个语句列表组成的（见上面的语法）。有两种声明：at-rules 和规则集。语句周围可能有空白。

## 2.3. at 规则

at 规则的开头是一个'@'字符，后面紧跟一个标识符（例如，'@import'，'@page'）。

一个 at 规则由包括下一个分号（;）或下一个块（以先到者为准）在内的所有内容组成。

CSS 2.2 的用户代理必须忽略任何出现在块内的'@import'规则，或者出现在任何非忽略的语句（除@charset 或@import 规则外）之后。

例如，假设一个 CSS 2.2 解析器遇到了这个样式表：

```css
@import 'subs.css';
h1 {
  color: blue;
}
@import 'list.css';
```

根据 CSS 2.2，第二个'@import'是非法的。CSS 2.2 解析器忽略了整个 at 规则，有效地将样式表简化为：

```css
@import 'subs.css';
h1 {
  color: blue;
}
```

在下面的例子中，第二个"@import" 规则是无效的，因为它发生在 "@media" 块内:

```css
@import 'subs.css';
@media print {
  @import 'print-main.css';
  body {
    font-size: 10pt;
  }
}
h1 {
  color: blue;
}
```

相反，为了达到只为 "print" 媒体导入样式表的效果，使用带有媒体语法的@import 规则，例如：

```css
@import 'subs.css';
@import 'print-main.css' print;
@media print {
  body {
    font-size: 10pt;
  }
}
h1 {
  color: blue;
}
```

### 2.3.1. 块

一个块以左大括号（{）开始，以匹配的右大括号（}）结束。中间可以有任何标记，但小括号（（））、大括号（[ ]）和大括号（{ }）必须总是成对出现，并且可以嵌套。单引号（'）和双引号（"）也必须出现在匹配对中，它们之间的字符被解析为一个字符串。关于字符串的定义，见上面的符号化。

下面是一个块的例子。请注意，双引号之间的右括号与块的开头括号不一致，第二个单引号是一个转义字符，因此与第一个单引号不一致:

```css
 {
  causta: '}' + ({7} * "'");
}
```

请注意，上述规则不是有效的 CSS 2.2，但它仍然是上述定义的一个块。

### 2.3.2. 规则集，声明块和选择器

一个规则集（也叫 "规则"）由一个选择器和一个声明块组成。

一个声明块以左大括号（{）开始，以匹配的右大括号（}）结束。在这中间必须有一个零或更多的声明和 at 规则的列表。声明必须以分号（;）结束，除非它们是列表中的最后一个。

注意：CSS level 2 没有可能出现在规则集内的 at 规则，但这种 at 规则可能会在未来的级别中被定义。

选择器（参见选择器一节）由第一个左大括号（{）以下的所有内容组成（但不包括）。一个选择器总是和一个声明块一起出现。当用户代理不能解析选择器时（即它不是有效的 CSS 2.2），它必须忽略选择器和后面的声明块（如果有的话）。

CSS 2.2 对选择器中的逗号（,）赋予了特殊的含义。然而，由于不知道逗号在未来的 CSS 更新中是否会获得其他含义，如果选择器中的任何地方有错误，整个声明都应该被忽略，即使选择器的其他部分在 CSS 2.2 中看起来是合理的。

例如，由于"&"在 CSS 2.2 的选择器中不是一个有效的标记，所以 CSS 2.2 的用户代理必须忽略整个第二行，并且不能将 h3 的颜色设置为红色：

```css
h1,
h2 {
  color: green;
}
h3,
h4 & h5 {
  color: red;
}
h6 {
  color: black;
}
```

下面是一个更复杂的例子。前两对大括号在一个字符串内，并没有标记选择器的结束。这是一个有效的 CSS 2.2 规则:

```css
p[example='public class foo\
{\
    private int x;\
\
    foo(int x) {\
        this.x = x;\
    }\
\
}'] {
  color: red;
}
```

### 2.3.3. 声明和属性

一个声明要么是空的，要么是由一个属性名称组成，后面是冒号（:），然后是一个属性值。在每个属性的周围可能有空白。

由于选择器的工作方式，同一选择器的多个声明可以被组织成分号（;）分隔的组。

因此，以下规则：

```css
h1 {
  font-weight: bold;
}
h1 {
  font-size: 12px;
}
h1 {
  line-height: 14px;
}
h1 {
  font-family: Helvetica;
}
h1 {
  font-variant: normal;
}
h1 {
  font-style: normal;
}
```

相当于：

```css
h1 {
  font-weight: bold;
  font-size: 12px;
  line-height: 14px;
  font-family: Helvetica;
  font-variant: normal;
  font-style: normal;
}
```

一个属性名称是一个标识符。任何标记都可以出现在属性值中。小括号（"()"）、中括号（"[ ]"）、大括号（"{ }"）、单引号（'）和双引号（"）必须成对出现，而且不在字符串中的分号必须被转义。括号、大括号和小括号可以嵌套。在引号内，字符被解析为一个字符串。

值的语法是为每个属性单独指定的，但在任何情况下，值都是由标识符、字符串、数字、长度、百分比、URI、颜色等构建的。

用户代理必须忽略具有无效的属性名称或无效的值的声明。每个 CSS 属性对它所接受的值都有自己的语法和语义限制。

例如，假设一个 CSS 2.2 解析器遇到了这个样式表：

```css
h1 {
  color: red;
  font-style: 12pt;
} /* 无效值: 12pt */
p {
  color: blue;
  font-vendor: any; /* 无效属性.: font-vendor */
  font-variant: small-caps;
}
em em {
  font-style: normal;
}
```

第一行的第二个声明有一个无效的值 "12pt"。第二行的第二个声明包含一个未定义的属性 "font-vendor"。CSS 2.2 解析器将忽略这些声明，有效地将样式表简化为：

```css
h1 {
  color: red;
}
p {
  color: blue;
  font-variant: small-caps;
}
em em {
  font-style: normal;
}
```

### 2.3.4. 注释

注释以字符 "/\*" 开始，以字符 "\*/" 结束。它们可以出现在其他标记之外的任何地方，其内容对渲染没有影响。注释不能被嵌套。

CSS 也允许在语法定义的某些地方使用 SGML 注释定界符（"<！--"和"-->"），但它们并不能给 CSS 注释定界。允许它们是为了使出现在 HTML 源文档中的样式规则（在 STYLE 元素中）可以从 HTML 3.2 之前的用户代理那里隐藏起来。

## 2.4. 值

### 2.4.1. 整数和实数

一些值类型可能有整数值（用`<integer>`表示）或实数值（用`<number>`表示）。实数和整数仅以十进制符号指定。一个<整数>由一个或多个数字 "0 "到 "9 "组成。一个<数字>可以是一个<整数>，也可以是 0 个或多个数字，后面跟着一个点（.），再加上一个或多个数字。整数和实数前面都可以紧跟一个"-"或 "+"来表示符号。-0 相当于 0，不是一个负数。

请注意，许多允许整数或实数作为数值的属性实际上将数值限制在某些范围内，通常是限制在一个非负值。

### 2.4.2. 长度

长度指的是距离测量。

长度值的格式（在本规范中用`<length>`表示）是一个`<number>`（带或不带小数点），后面紧跟一个单位标识符（例如，px，em 等）。在一个零长度之后，单位标识符是可选的。

有些属性允许负的长度值，但这可能会使格式化模型复杂化，而且可能有特定的实施限制。如果不能支持负的长度值，它应该被转换为可以支持的最近的值。

如果一个负的长度值被设置在一个不允许负长度值的属性上，那么这个声明就会被忽略。

在使用的长度不能被支持的情况下，用户代理必须在实际值中对其进行近似。

有两种类型的长度单位：相对和绝对。相对长度单位指定一个相对于另一个长度属性的长度。使用相对单位的样式表可以更容易地从一个输出环境扩展到另一个。

#### 2.4.2.1. 绝对单位

绝对长度单位是固定的，用其中任何一个单位表示的长度都会显示为该尺寸。

绝对长度单位不建议在屏幕上使用，因为屏幕尺寸变化太大。然而，如果输出媒介是已知的，例如印刷品的排版，则可以使用它们。

下表列出了常见的绝对单位：

| 单位 | 描述                          |
| ---- | ----------------------------- |
| cm   | 厘米                          |
| mm   | 毫米                          |
| in   | 英寸 (1 英寸 = 96px = 2.54cm) |
| px   | CSS 像素 (1px = 1/96 英寸)    |
| pt   | 点 (1pt = 1/72 英寸)          |
| pc   | 12 点活字 (1pc = 12 pt)       |

像素（px）是相对于观看设备而言的。对于低 DPI 设备，1px 是显示器的一个设备像素（点）。对于打印机和高分辨率的屏幕，1px 意味着多个设备像素，实际上这个数字大概等于 window.devicePixelRatio。

一条样式中可以混合使用多种单位，包括混合使用绝对单位和相对单位。如果能预先知道内容的呈现方式（例如为供打印的文档设计样式）， 那么绝对单位很有用处。我设计 CSS 样式不怎么使用绝对单位。个人认为相对单位更灵活、更容易管理， 而且我也很少创作需要与现实世界度量挂钩的内容。

#### 2.4.2.2. 相对单位

相对长度的规定和实现都比绝对长度更复杂，需要以严密、精确的语言明确定义。相对单位的测量需要依托其他类型的单位。可惜 CSS 规范的语言还没那么精确（这个问题巳经困扰 CSS 多年）。因此尽管 CSS 规定了许多既有趣又有用的相对单位，但是其中一些单位还没有得到浏览器广泛、一致的支持，用户还无法使用。下表出了主流浏览器支持的一些 CSS 相对单位。

| 单位 | 描述                                                |
| ---- | --------------------------------------------------- |
| em   | 相对于元素的字体大小（2em 表示当前字体大小的 2 倍） |
| ex   | 相对于字符“x”的高度                                 |
| ch   | 相对于数字“0”的宽度                                 |
| rem  | 相对于根元素的字体大小                              |
| lh   | 相对于元素的 line-height                            |
| vw   | 相对于视口宽度的 1%                                 |
| vh   | 相对于视口高度的 1%                                 |
| vmin | 相对于视口小尺寸的 1%                               |
| vmax | 相对于视口大尺寸的 1%                               |

下表中的数字指定了完全支持长度单位的第一个浏览器版本。

| 长度单位                       | Chrome | Edge | FireFox | Safari | Opera |
| ------------------------------ | ------ | ---- | ------- | ------ | ----- |
| em, ex, px, cm, mm, in, pt, pc | 1.0    | 3.0  | 1.0     | 1.0    | 3.5   |
| ch                             | 27.0   | 9.0  | 1.0     | 7.0    | 20.0  |
| rem                            | 4.0    | 9.0  | 3.6     | 4.1    | 11.6  |
| vh, vw                         | 20.0   | 9.0  | 19.0    | 6.0    | 20.0  |
| vmin                           | 20.0   | 12.0 | 19.0    | 6.0    | 20.0  |
| vmax                           | 26.0   | 16.0 | 19.0    | 7.0    | 20.0  |

下面我们具体看一下这些相对单位。

1. **em 与 rem**

em 单位的使用有两种情况：

- em 作为本元素的非 font-size 属性。此时，em 的大小就是本元素的字号大小。
- em 作为本元素的 font-size 属性。此时，em 的大小为父元素的字号大小。

来看下面几个例子。

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <style>
      body {
        font-size: 20px;
        height: fit-content;
        border: 1px black solid;
        margin: 1em;
      }
    </style>
    <title>Document</title>
  </head>
  <body>
    一段文本
  </body>
</html>
```

这个例子中，我们改写了 body 的 margin 属性，这个属性的用户代理样式为 8px，现在改写为 1em。显然 margin 不是 font-size，因此它的大小就是 body 字体的大小，因此，我们可以看到这里的 1em = 20 px。当我们修改了本元素的字体时，margin 也会跟着变化。

再来看一个例子：

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <style>
      body {
        font-size: 20px;
        margin: 0px;
      }

      span {
        font-size: 1em;
      }
    </style>
    <title>Document</title>
  </head>
  <body>
    <span>一段文本</span>
  </body>
</html>
```

这个例子中，span 元素最近的父元素为 body，span 元素的 font-size 属性值为 1em，因此这个大小就是父元素字号的大小：20px。

rem 则和 em 不同，它只相对于 html 元素（根元素）的字号大小。

来看这个例子：

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <style>
      html {
        font-size: 20px;
      }
      body {
        font-size: 16px;
        margin: 0px;
      }
      span {
        font-size: 1rem;
      }
    </style>
    <title>Document</title>
  </head>
  <body>
    <span>一段文本</span>
  </body>
</html>
```

在这个例子中，span 的 font-size 属性被设置为 1rem，而 html 元素的 font-size 被设置为 20px。因此，这里的 1rem = 20px。而不是 16px。

2. **vw 与 vh**

1vw 代表视口宽度的 1%。而 1vh 表示视口高度的 1%。

视口 (viewport) 代表当前可见的计算机图形区域。在 Web 浏览器术语中，通常与浏览器窗口相同，但不包括浏览器的 UI， 菜单栏等——即指你正在浏览的文档的那一部分。

文档，比如这篇文章，可能会非常长。你的 viewport 就是你现在所能见到的所有事物。值得注意的是“什么是视口区域”这个问题，页面中的一些导航菜单也包括在其中。Viewport 的大小取决于屏幕的大小，无论浏览器是否处于全屏模式，是否被用户缩放了。Viewport 外的区域，比如这个文档的 See Also 部分，可能需要滚动到其所在的区域才会出现在屏幕上。

- 在尺寸较大的设备中，在这些设备上，应用显示区域不一定是全屏的，viewport 是浏览器窗口的大小。
- 在大多数移动设备中，浏览器是全屏的，viewport 是整个屏幕的大小。
- 在全屏模式下，viewport 是设备屏幕的范围，窗口是浏览器窗口，浏览器窗口大小小于或等于视口的大小，并且文档是这个网站，文档的大小可比 viewport 长或宽。

概括地说，viewport 基本上是当前文档的可见部分。

在实测中，innerWidth 和 outerWidth 是相同的，但是 outerHeight 比 innerHeight 高 100px。这是因为 outerHeight 的测量包括浏览器框架在内，包括了地址栏和书签栏总共 100px 的高度，而浏览器没有左右边框。

innerHeight 和 innerWidth 所组成的区域通常被认为是布局视口 (layout viewport)。浏览器的框架不被认为是 viewport 的一部分。

Web 浏览器包含两个 viewport，**布局视口(layout viewport)** 和 **视觉视口(visual viewport)**。visual viewport 指当前浏览器中可见的部分，并且可以变化。当使用触屏双指缩放，当动态键盘在手机上弹出的时候，或者之前隐藏的地址栏变得可见的时候，visual viewport 缩小了，但是 layout viewport 却保持不变。

我们上面说到的固定的头部和尾部，固定在 layout viewport 的底部和顶部，所以当 visual viewport 缩小的时候,头部和尾部仍保留在视觉中。当你缩放页面时，布局视口可能不能被全部看到。如果你放大布局视口的中间部分，内容将在四个方向上扩展。如果你有一个固定的头部和底部，它们依然固定在布局视口的顶部和底部，因此它们可能会在设备屏幕的底部和顶部不可见-视觉视口。视觉视口是布局视口当前的可见部分如果你向下滚动，视觉视口的内容就会改变，并布局视口的底部就会滚动到可视区域。

视觉视口是屏幕的可视部分，不包括屏幕键盘，缩放外的区域。视觉视口比布局视口相同或者更小

对于一个包含盒子架，objects 或外部 svg 的页面，两者都有它们自己的 window 对象，只有最外层的 window 的视觉视口不同于布局视口。对于包含的文档，视觉视口与布局视口是相同的。

来看一个例子：

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <style>
      body {
        width: 100vw;
        height: 100vh;
        margin: 0px;
        background-color: #eeffee;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20em;
        color: #ffeef8;
      }
    </style>
    <title>Document</title>
  </head>
  <body>
    <span>居中文字</span>
  </body>
</html>
```

这个例子中，我们将 body 的 width 设置为 100vw，高度设置为 100vh，margin 为 0px。这样 body 就占满了整个可见视口。接着我们将 body 设置为 flexbox，并居中字体。

vmin 和 vmax 和我们讲的上述单位很相似。但是也考虑到了屏幕旋转的影响。vmin 指的是可见视口中长度和宽度中较小的一个，vmax 则是较大的一个。

1. **cal()**

允许将 CSS 属性值设置为算式是 CSS3 定义的一个引人关注的特性。这种灵活手段在控制能力和精确程度方面都给样式设计工作提供了帮助。calc() 此 CSS 函数允许在声明 CSS 属性值时执行一些计算。它可以用在如下场合：`<length>`、`<frequency>`, `<angle>`、`<time>`、`<percentage>`、`<number>`、或 `<integer>`。

来看这个例子。

```css
/* property: calc(expression) */
width: calc(100% - 80px);
```

此 calc()函数用一个表达式作为它的参数，用这个表达式的结果作为值。这个表达式可以是任何如下操作符的组合，采用标准操作符处理法则的简单表达式。

+: 加法。
-: 减法。
\*: 乘法，乘数中至少有一个是 `<number>`。
/: 除法，除数（/ 右面的数）必须是 `<number>`。

表达式中的运算对象可以使用任意 `<length>` 值。如果你愿意，你可以在一个表达式中混用这类值的不同单位。在需要时，你还可以使用小括号来建立计算顺序。

### 2.4.3. 百分数

百分数的格式（在本规范中用`<percentage>`表示）是一个`<number>`，后面紧跟着'%'。

百分数总是相对于另一个值，例如长度。每个允许百分比的属性也定义了百分比所指向的值。这个值可能是同一元素的另一个属性，一个祖先元素的属性，或者是格式化上下文的一个值（例如，一个包含块的宽度）。当为根元素的一个属性设置百分数，并且百分比被定义为指某些属性的继承值时，结果值是百分比乘以该属性的初始值。

由于子元素（通常）继承其父元素的计算值，在下面的例子中，P 元素的子元素将继承 "line-height" 的值 12px，而不是百分数（120%）：

```css
p {
  font-size: 10px;
}
p {
  line-height: 120%;
} /* 'font-size' 的 120% */
```

### 2.4.4. URL

本规范中的 URI 值（统一资源标识符，见[RFC3986]，其中包括 URL、URN 等）用`<uri>`表示。在属性值中用于指定 URI 的功能符号是 "url()"，如：。

```css
body {
  background: url('http://www.example.com/pinkish.png');
}
```

URI 值的格式是 "url('后面是可选的空白，后面是可选的单引号（'）或双引号（"）字符，后面是 URI 本身，后面是可选的单引号（'）或双引号（"）字符，后面是可选的空白，后面是'）'。这两个引号字符必须是相同的。

一个没有引号的例子：

```css
li {
  list-style: url(http://www.example.com/redball.png) screen;
}
```

在未加引号的 URI 中出现的一些字符，如括号、空白字符、单引号（'）和双引号（"），必须用反斜杠转义，这样得到的 URI 值就是一个 URI 标记：'\(', '\)'。

根据 URI 的类型，也可以将上述字符写成 URI 转义（其中"（"=%28，"）"=%29，等等），如[RFC3986]中所述。

注意，COMMENT 标记不能出现在其他标记中：因此，"url(/_x_/pic.png) "表示 URI"/_x_/pic.png"，而不是 "pic.png"。

为了创建不依赖资源的绝对位置的模块化样式表，作者可以使用相对 URI。相对 URI（如[RFC3986]中的定义）使用一个基础 URI 被解析为完整 URI。RFC 3986 第 5 节定义了这个过程的规范性算法。对于 CSS 样式表，基 URI 是样式表的 URI，而不是源文档的 URI。

例如，假设有以下规则。

```css
body {
  background: url('yellow');
}
```

位于一个由 URI 指定的样式表中:http://www.example.org/style/basic.css。

源文档的 BODY 的背景将用 URI 指定的资源所描述的任何图像来拼接：http://www.example.org/style/yellow。

用户代理在处理无效的 URI 或指定不可用或不适用的资源的 URI 方面可能有所不同。

### 2.4.5. 颜色

颜色在网页中的作用非常重要。在 CSS 中设置颜色有好几种方法。最简单的办法是使用规定的颜色名称，或者设置红、绿、蓝三种颜色成分的值（十进制或十六进制）。设置颜色成分值时，十进制值以逗号分隔，十六进制值前面通常要加上一个`#`号（例如`#ffffff`，它代表白色）。你可以查看[MDN 参考](https://developer.mozilla.org/zh-CN/docs/Web/CSS/color_value)查看各种颜色代码。

**更复杂的颜色**

颜色名称和简单的十六进制数不是表示颜色的唯一方式。CSS 中还可以用一些函数选择颜色。下表逐一介绍了这些函数。

| 函数             | 说明示例                                                                              |
| ---------------- | ------------------------------------------------------------------------------------- | -------------------------------- |
| rgb(r, g, b)     | 用 RGB 模型表示颜色 color: rgb(112, 128,144)                                          |
| rgba(r, g, b, a) | 用 RGB 模型表示颜色，外加一个用于表示透明度的 a 值（0 代表全透明， 1 代表完全不透明） | color: rgba(112, 128, 144, 0.4)  |
| hsl(h, s, l)     | 用 HSL 模型（色相(hue)、饱和度(saturation)和明度(Lightness)）表示颜色                 | color: hsl(120, 100%, 22%)       |
| hsla(h, s, l, a) | 与 HSL 模式类似， 只不过增加了一个表示透明度的 a 值                                   | color: hsla(120, 100%, 22%, 0.4) |

### 2.4.6. 字符串

字符串可以用双引号或单引号书写。双引号不能出现在双引号内，除非转义（例如，"\"或"\22"）。同样，单引号（例如，"\'"或"\27"）也是如此。

"this is a 'string'"
"this is a \"string\""
'this is a "string"' （这是一个字符串
'this is a \'string\'' 这是一个字符串。

一个字符串不能直接包含一个换行。要在一个字符串中包含换行，请使用代表 ISO-10646 中的换行字符（U+000A）的转义，例如"\A "或"\00000a"。这个字符代表了 CSS 中 "换行 "的一般概念。参见 "content "属性的例子。

出于审美或其他原因，可以将字符串分成几行，但在这种情况下，换行本身必须用反斜线（\）来转义。例如，以下两个选择器是完全一样的。

```css
a[title='a 是一个\
o 非常长的标题'] {
  /*...*/
}
a[title='一个不太长的标题'] {
  /*...*/
}
```

### 2.4.7. 角度

角度这种单位在旋转变换时可以用到。角度的表示方式是一个数字后跟一个单位，如 360deg。数字可以是负数，负数表示逆时针，而正数表示顺时针。

| 单位 | 说明                                                                                               |
| ---- | -------------------------------------------------------------------------------------------------- |
| deg  | 度。一个完整的圆是 360deg。例：0deg，90deg，14.23deg。                                             |
| grad | 百分度。一个完整的圆是 400grad。例：0grad，100grad，38.8grad。                                     |
| rad  | 弧度。一个完整的圆是 2π 弧度，约等于 6.2832rad。1rad 是 180/π 度。例：0rad，1.0708rad，6.2832rad。 |
| turn | 圈数。一个完整的圆是 1turn。例：0turn，0.25turn，1.2turn。                                         |

### 2.4.8. 时间

时间的单位可以在过渡中使用。时间单位包含秒（s）和毫秒（ms）。1 秒等于 1000 毫秒。
