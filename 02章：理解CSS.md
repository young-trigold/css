**目录：**

- [12. 理解 CSS](#12-理解-css)
  - [12.1. CSS 标准化](#121-css-标准化)
  - [12.2. 盒模型](#122-盒模型)
  - [12.3. 选择器概览](#123-选择器概览)
    - [12.3.1. 基本选择器](#1231-基本选择器)
    - [12.3.2. 组合选择器](#1232-组合选择器)
    - [12.3.3. 伪元素选择器](#1233-伪元素选择器)
    - [12.3.4. 伪类选择器](#1234-伪类选择器)
    - [12.3.5. 分组选择器](#1235-分组选择器)
  - [12.4. 属性概览](#124-属性概览)
    - [12.4.1. 盒模型属性](#1241-盒模型属性)
    - [12.4.2. 布局属性](#1242-布局属性)
    - [12.4.3. 文本属性](#1243-文本属性)
    - [12.4.4. 过渡，动画和变换属性](#1244-过渡动画和变换属性)
    - [12.4.5. 其他属性](#1245-其他属性)

# 12. 理解 CSS

接下来的几章我们来看看 CSS (Cascading Style Sheet, 层叠样式表）定义的属性。前面简单回顾了 CSS 的基础知识，在深入研究细节之前，我们先通过本章来了解一些其他的背景知识。

## 12.1. CSS 标准化

CSS 有一段不堪回首的历史。那时候浏览器被看做划分市场的工具，浏览器厂商将 CSS 作为创建自己软件特有功能的利器。当时的情况可谓一团糟：具有相同名称的属性采用不同的方式处理，只能用浏览器特定的属性访问浏览器特定的功能。结果是 Web 开发人员不得不创建只在一种浏览器上运行的站点或应用程序。

好的一面是，不同浏览器通常会因速度、易用性以及与 CSS 等标准的兼容性而呈现差别（最后一点发挥的作用正越来越大）；不好的一面是 CSS 标准化过程并不理想。

在接下来的几章你会看到，CSS 包含大量功能。W3C (CSS 和 HTML 的标准组织） 并不想创建一个单一标准，而是将 CSS3 分割为多个模块(module)，并允许每个模块根据自身需要进行更新。这个想法非常了不起，它明显优于单一方法一—当然，这也代表不存在 CSS3 兼容性的整体标准了，开发人员需要仔细考量每一个模块，并判断是否已获得足够广泛的支持来使用该模块。

还有一个比较棘手的问题：目前还没有 CSS3 模块达到标准化过程的最后阶段（成为 W3C 推荐标准）。有些模块，特别是那些引入 CSS 新功能的模块，还只处于标准化过程的早期阶段（工作草案） ，随时都有可能变化。可能添加、修改或删除属性；可能出现新模块，也可能毙掉旧模块；不同模块之间的关系可能发生变化（某些模块往往依赖于其他模块中定义的属性或单位）。因此，当你阅读本书时，某些比较新的属性可能已经跟我撰写本书时有所不同了。

接下来的几章我会介绍一些比较稳定的模块的属性，没什么特殊情况的话，主流浏览器很快就会实现这些属性。这些特性基本已经稳定了，新版本的浏览器都会支持。有时候开发人员并不确定某个属性是否适合自己的项目。

在模块定义还不太稳定的阶段，浏览器会采用厂商前缀实现某个特性。这种做法不同以往，它允许早期采纳者试用浏览器实现的这些新属性。本书尽量避开这些试验性属性，但如果某些 CSS3 特性实在非常重要，我会在示例中加上厂商前缀。无论如何，带厂商前缀的实现都非常接近规范。

不同浏览器的厂商前缀不同，下表列出了几个常见浏览器厂商前缀。

| 浏览器            | 前缀     |
| ----------------- | -------- |
| Chrome, Safari    | -webkit- |
| Opera             | -o-      |
| Firefox           | -moz-    |
| Internet Explorer | -ms-     |

## 12.2. 盒模型

CSS 中的一个基本概念是盒模型(box model)。可见元素会在页面中占据一个矩形区域，该区域就是元素的盒子(box)，由四部分组成，由内到外为：元素内容->内边距->边框->外边距。

元素盒子有两个部分是可见的：元素内容和边框。内边距是内容和边框之间的空间，外边距是边框和页面上其他元素之间的空间。理解这四部分之间的相互关系对于高效利用 CSS 至关重要。在接下来的章节中，我们会学习控制外边距、内边距、边框的属性，以及控制内容整体外观的属性。

元素还可以包含其他元素。这种情况下，父元素的内容盒子称为子元素的 **块容器(container block)**，通常称为容器。

可以使用包含块的特征限定元素的外观。这不光适用于层叠属性和继承属性，还适用于显式定义的属性。

## 12.3. 选择器概览

我们将选择器及添加它们的 CSS 版本总结在下表中。

### 12.3.1. 基本选择器

| 选择器     | 语法       | 例子       | 说明                 | CSS 版本 |
| ---------- | ---------- | ---------- | -------------------- | -------- |
| 通用选择器 | \*         | \*         | 所有元素             | 2        |
| 元素选择器 | tagName    | input      | 特定标签名的元素     | 1        |
| 类选择器   | .className | .container | 特定类名的元素       | 1        |
| id 选择器  | #idName    | #nav-bar   | 特定 id 名的元素     | 1        |
| 属性选择器 | [attr] 等  | [checked]  | 和特定属性联系的元素 | 2, 3     |

### 12.3.2. 组合选择器

| 选择器         | 语法                            | 例子      | 说明                            | CSS 版本             |
| -------------- | ------------------------------- | --------- | ------------------------------- | -------------------- | --- |
| 后代选择器     | <基本选择器 A> <基本选择器 B>   | div, span | A 选定元素的包含 B 元素         | 1                    |
| 直接后代选择器 | <基本选择器 A> > <基本选择器 B> | div>span  | A 选定元素的直接包含 B 元素     | 2                    |
| 兄弟选择器     | <基本选择器 A> ~ <基本选择器 B> | p ~ span  | A 选定元素之后的同级 B 元素     | 3                    |
| 紧邻兄弟选择器 | <基本选择器 A> + <基本选择器 B> | p + span  | A 选定元素之后紧跟的同级 B 元素 | 2                    |
| 列选择器       | <列选择器>                      |           | <单元格选择器>                  | 选择列中的单元格元素 | 4   |

### 12.3.3. 伪元素选择器

| 选择器         | 语法                             | 例子            | 说明                                       | CSS 版本 |
| -------------- | -------------------------------- | --------------- | ------------------------------------------ | -------- |
| ::after        | <非伪元素选择器 S>::after        | p::after        | 创建一个子元素插入 S 的最后面              | 3        |
| :after         | <非伪元素选择器 S>:after         | p:after         | 创建一个子元素插入 S 的最后面，兼容 IE8    | 2        |
| ::before       | <非伪元素选择器 S>::before       | p::before       | 创建一个子元素插入 S 的最前面              | 3        |
| :before        | <非伪元素选择器 S>:before        | p:before        | 创建一个子元素插入 S 的最前面，兼容 IE8    | 2        |
| ::first-letter | <非伪元素选择器 S>::first-letter | p::first-letter | 选取第一个块级元素的文本内容的第一个字母   | 3        |
| :first-letter  | <非伪元素选择器 S>:first-letter  | p:first-letter  | 选取第一个块级元素的文本内容的第一个字母   | 2        |
| ::first-line   | <非伪元素选择器 S>::first-line   | p::first-line   | 选取第一个块级元素的文本内容的第一行       | 3        |
| :first-line    | <非伪元素选择器 S>:first-line    | p:first-line    | 选取第一个块级元素的文本内容的第一个字母   | 2        |
| ::selection    | <非伪元素选择器 S>::selection    | p::selectiob    | 选取第一个块级元素文本内容被用户高亮的部分 | 3        |

### 12.3.4. 伪类选择器

| 选择器               | 语法                          | 例子                   | 说明                                  | CSS 版本 |
| -------------------- | ----------------------------- | ---------------------- | ------------------------------------- | -------- |
| :first-child         | <选择器>:first-child          | p:first-child          | 选定元素中第一个子元素                | 2        |
| :last-child          | <选择器>:last-child           | p:last-child           | 选定元素中最后一个子元素              | 3        |
| :only-child          | <选择器>:last-child           | p:only-child           | 选定元素中唯一一个子元素              | 3        |
| :only-of-type        | <选择器>:only-of-type         | p:last-child           | 选定元素中唯一一个类型的子元素        | 3        |
| :nth-child(n)        | <选择器>:nth-child(n)         | p:nth-child-n          | 选定元素中第 n 个子元素               | 3        |
| :nth-last-child(n)   | <选择器>:nth-last-child(n)    | p:nth-last-child-n     | 选定元素中倒数第 n 个子元素           | 3        |
| :nth-of-type(n)      | <选择器>:nth-of-type(n)       | p:nth-of-type(n)       | 选定元素中特定类型的第 n 个子元素     | 3        |
| :nth-last-of-type(n) | <选择器>::nth-last-of-type(n) | p::nth-last-of-type(n) | 选定元素中特定类型的倒数第 n 个子元素 | 3        |
| :link                | <链接选择器>:link             | a:link                 | 选定链接的没有被访问状态              | 1        |
| :visited             | <链接选择器>:visited          | a:visited              | 选定链接的被访问状态                  | 1        |
| :hover               | <选择器>:hover                | div:hover              | 选定元素的被鼠标悬浮状态              | 2        |
| :active              | <选择器>:active               | a:active               | 选定元素的被激活状态                  | 2        |
| :enabled             | <选择器>:enabled              | button:enabled         | 选取已启用的元素                      | 3        |
| :disabled            | <选择器>:disabled             | button:disabled        | 选取已禁用的元素                      | 3        |
| :valid               | <选择器>:valid                | input:valid            | 选取验证有效的元素状态                | 3        |
| :invalid             | <选择器>:invalid              | input:invalid          | 选取验证无效的元素状态                | 3        |
| :required            | <选择器>:required             | input:required         | 选取必需的元素                        | 3        |
| :optional            | <选择器>:optional             | input:optional         | 选取非必需的元素状态                  | 3        |
| :checked             | <选择器>:checked              | input:checked          | 选取已选中的单选框和复选框            | 3        |
| :focus               | <选择器>:focus                | input:focus            | 选取已聚焦的元素状态                  | 3        |
| :empty               | <选择器>:empty                | p:empty                | 选择没有任何子元素的特定元素          | 3        |
| :not                 | <选择器>:not(<选择器>)        | p:not<.fancy>          | 选择不匹配特定选择器的元素            | 3        |
| :target              | <选择器>:target               | :target                | 选择 URL 片段标识符指向的元素         | 3        |

### 12.3.5. 分组选择器

| 选择器     | 语法                        | 例子       | 说明                     | CSS 版本 |
| ---------- | --------------------------- | ---------- | ------------------------ | -------- |
| 分组选择器 | <选择器 1>, <选择器 2>, ... | h1, h2, h3 | 每个选择器选中元素的并集 | 1        |

## 12.4. 属性概览

下面总结了 CSS 属性及添加相应属性的 CSS 版本。

### 12.4.1. 盒模型属性

下面表总结了配置元素盒子可能用到的属性。

1. **内容**

| 属性 | 说明 | CSS 版本 |
| overflow | 设置内容溢出元素盒子时的处理方式的简写属性 | 2 |
| overflow-x | 设置内容横向溢出元素盒子的处理方式 | 3 |
| overflow-y | 设置内容纵向溢出元素盒子的处理方式 | 3 |

2. **背景**

| 属性                  | 说明                                                   | CSS 版本 |
| --------------------- | ------------------------------------------------------ | -------- |
| background            | 设置所有背景值的简写属性                               | 1        |
| background-attachment | 设置元素的背景附着属性，决定背景图片是否随页面一起滚动 | 1        |
| background-clip       | 设置元素背景颜色和图像的裁剪区域                       | 3        |
| backgroud-color       | 设置背景颜色                                           | 1        |
| backgroud-image       | 设置背景图片                                           | 1        |
| background-origin     | 设置背景图像绘制的起始位置                             | 3        |
| background-position   | 设置背景图像在元素盒子中的位置                         | 1        |
| bacKground-repeat     | 设置背景图像的重复方式                                 | 1        |
| background-size       | 设置背景图像的绘制尺寸                                 | 3        |

3. **内边距**

| 属性           | 说明                                 | CSS 版本 |
| -------------- | ------------------------------------ | -------- |
| padding        | 设置元素盒子所有内边距宽度的简写属性 | 1        |
| padding-bottom | 设置盒子的下内边距的宽度             | 1        |
| padding-left   | 设置盒子的左内边距的宽度             | 1        |
| padding-right  | 设置盒子的右内边距的宽度             | 1        |
| padding-top    | 设置盒子的上内边距的宽度             | 1        |

4. **边框**

| 属性                       | 说明                           | CSS 版本 |
| -------------------------- | ------------------------------ | -------- |
| border                     | 设置所有边框的的简写属性       | 1        |
| border-bottom              | 为所有下边框设置宽度的简写属性 | 1        |
| border-bottom-color        | 设置下边框的颜色               | 1        |
| border-bottom-left-radius  | 设置边框左下角的弯曲半径       | 3        |
| border-bottom-right-radius | 设置边框右下角的弯曲半径       | 3        |
| border-botton-style        | 设置下边框的样式               | 1        |
| border-botton-width        | 设置下边框的宽度               | 1        |
| border-color               | 设置边框颜色的简写属性         | 1        |
| border-image               | 使用图像作为边框的简写属性     | 3        |
| border-image-outset        | 指定图像向边框盒外部扩展的区域 | 3        |
| border-image-repeat        | 指定边框图像的缩放和重复方式   | 3        |
| border-image-slice         | 指定边框图像的切割方式         | 3        |
| boder-image-source         | 设置边框图像的来源             | 3        |
| border-image-width         | 设置边框图像的宽度             | 3        |
| border-width               | 设置边框宽度的简写属性         | 1        |

5. **边框外轮框**

| 属性           | 说明                             | CSS 版本 |
| -------------- | -------------------------------- | -------- |
| outline-color  | 设置元素边框外围轮廓线的颜色     | 2        |
| outline-offset | 设置轮廓距离元素边框边缘的偏移量 | 2        |
| outline-style  | 设置轮廓的样式                   | 2        |
| outline-width  | 设置轮廓的宽度                   | 2        |
| outline        | 设置轮廓的简写属性               | 2        |

6. **外边距**

| 属性          | 说明                                 | CSS 版本 |
| ------------- | ------------------------------------ | -------- |
| margin        | 设置元素盒子四个外边距宽度的简写属性 | 1        |
| margin-bottom | 设置盒子的下外边距的宽度             | 1        |
| margin-left   | 设置盒子的左外边距的宽度             | 1        |
| margin-right  | 设置盒子的右外边距的宽度             | 1        |
| margin-top    | 设置盒子的上外边距的宽度             | 1        |

7. **盒子整体**

| 属性       | 说明                             | CSS 版本 |
| ---------- | -------------------------------- | -------- |
| box-shadow | 设置元素的一个或者多个阴影效果   | 3        |
| box-sizing | 设置要应用盒子尺寸相关属性的元素 | 3        |
| width      | 设置元素盒子的宽度               | 1        |
| min-width  | 设置元素盒子的最小宽度           | 2        |
| max-width  | 设置元素盒子的最大宽度           | 2        |
| height     | 设置元素盒子的高度               | 1        |
| min-height | 设置元素盒子的最小高度           | 2        |
| max-height | 设置元素盒子的最大高度           | 2        |
| display    | 设置元素盒子的类型               | 1        |
| visibility | 设置元素的可见性                 | 2        |

### 12.4.2. 布局属性

下面表格总结了一些布局属性。

1. **浮动和定位布局**

| 属性     | 说明                                                             | CSS 版本 |
| -------- | ---------------------------------------------------------------- | -------- |
| float    | 将元素移动到其包含块的左边界或者右边界，或者另一个浮动元素的边界 | 1        |
| clear    | 设置盒子的左边界、右边界或左右两个边界不允许出现浮动元素         | 1        |
| position | 设置元素的定位方式                                               | 2        |
| bottom   | 设置盒子的下外边距边界到包含块的内边距边界的距离                 | 2        |
| left     | 设置盒子的左外边距边界到包含块的内边距边界的距离                 | 2        |
| right    | 设置盒子的右外边距边界到包含块的内边距边界的距离                 | 2        |
| top      | 设置盒子的上外边距边界到包含块的内边距边界的距离                 | 2        |
| z-index  | 设置元素的层叠顺序                                               | 2        |

2. **多列布局**

| 属性              | 说明                               | CSS 版本 |
| ----------------- | ---------------------------------- | -------- |
| columns           | 多列布局中设置列宽和列数的简写属性 | 3        |
| column-width      | 设置列宽                           | 3        |
| column-count      | 设置列数                           | 3        |
| column-fill       | 设置列于列之间的内容如何分布       | 3        |
| column-gap        | 设置列与列之间的间隔               | 3        |
| column-rule       | 设置列与列之间直线的简写属性       | 3        |
| column-rule-color | 设置列与列之间直线的颜色           | 3        |
| column-rule-width | 设置列与列之间直线的宽度           | 3        |
| column-rule-style | 设置列与列之间直线的样式           | 3        |
| column-span       | 设置多列布局中元素跨越的列数       | 3        |

3. **弹性盒子布局**

| 属性            | 说明                                                               | CSS 版本 |
| --------------- | ------------------------------------------------------------------ | -------- |
| flex-flow       | 设置弹性盒子中主轴方向和内容溢出的简写属性                         | 3        |
| flex-direction  | 设置弹性盒子布局中主轴的方向                                       | 3        |
| flex-wrap       | 设置弹性盒子布局中内容溢出的处理方式                               | 3        |
| flex            | 设置 flex 子元素增长系数，收缩系数和占用主轴初始空间大小的简写属性 | 3        |
| flex-grow       | 设置 flex 子元素的增长系数                                         | 3        |
| felx-shrink     | 设置 flex 子元素的收缩系数                                         | 3        |
| flex-basis      | 设置 flex 子元素占用主轴初始空间大小                               | 3        |
| align-items     | 设置 flex 子元素在交叉轴上的位置                                   | 3        |
| align-self      | 覆写 flex 子元素本身的交叉轴位置                                   |
| justify-content | 设置 flex 子元素在主轴上的位置                                     | 3        |
| order           | 设置 flex 子元素本身的布局位置                                     | 3        |
| gap             | 设置 felx 子元素之间的主轴和交叉轴上的间隔的简写属性               | 3        |
| row-gap         | 设置 felx 子元素之间的主轴上的间隔的属性                           | 3        |
| column-gap      | 设置 felx 子元素之间的交叉轴上的间隔的属性                         | 3        |

// @TODO 4. **网格布局**

### 12.4.3. 文本属性

| 属性            | 说明                                       | CSS 版本 |
| --------------- | ------------------------------------------ | -------- |
| @font-face      | 指定网页使用的字体                         | 3        |
| direction       | 指定文本方向                               | 2        |
| font            | 设置字体系列，大小和颜色的简写属性         | 1        |
| font-family     | 指定文本所用的字体系列，排在前面的优先使用 | 1        |
| font-size       | 设置字体大小                               | 1        |
| font-style      | 设置字体是正常，斜体还是倾斜字体           | 1        |
| font-variant    | 设置字体是否以小型大写字母显示             | 1        |
| font-weight     | 设置文本粗细                               | 1        |
| letter-spacing  | 设置字母间距                               | 1        |
| word-spacing    | 设置单词间距                               | 1        |
| line-height     | 设置行高                                   | 1        |
| text-align      | 设置文本水平方向的对齐方式                 | 1        |
| text-justify    | 设置文本块的对齐方式                       | 3        |
| text-decoration | 设置文本的装饰（如下划线）                 | 1        |
| text-indent     | 设置文本块中首行文本的缩进                 | 1        |
| text-shadow     | 设置文本的阴影效果                         | 3        |
| text-transform  | 设置文本块字母的大小写                     | 1        |

### 12.4.4. 过渡，动画和变换属性

下表总结了改变元素外观可能用到的一些属性。

1. **过渡**

| 属性                       | 说明                                                   | CSS 版本 |
| -------------------------- | ------------------------------------------------------ | -------- |
| transition                 | 设置过渡属性，过渡时长，过渡函数，和过渡延迟的简写属性 | 3        |
| transition-property        | 设置过渡属性                                           | 3        |
| transition-duration        | 设置过渡时长                                           | 3        |
| transition-timing-function | 设置过渡函数                                           | 3        |
| transition-delay           | 设置过渡延迟                                           | 3        |

2. **变换**

| 属性      | 说明     | CSS 版本 |
| --------- | -------- | -------- |
| transform | 设置变换 | 3        |

3. **动画**

| 属性                      | 说明                                                                             | CSS 版本 |
| ------------------------- | -------------------------------------------------------------------------------- | -------- |
| animation                 | 设置动画时长，函数，延迟，迭代次数，方向，样式应用规则，播放状态，名称的简写属性 | 3        |
| animation-druation        | 设置动画时长                                                                     | 3        |
| animation-timing-function | 设置动画函数                                                                     | 3        |
| animation-delay           | 设置动画延迟                                                                     | 3        |
| animation-iteration-count | 设置动画迭代次数                                                                 | 3        |
| animation-direction       | 设置动画播放方向                                                                 | 3        |
| animation-fill-mode       | 设置样式应用规则                                                                 | 3        |
| animation-play-state      | 设置动画播放状态                                                                 | 3        |
| animation-name            | 设置动画名称                                                                     | 3        |

### 12.4.5. 其他属性

| 属性                | 说明                                 | CSS 版本 |
| ------------------- | ------------------------------------ | -------- |
| color               | 设置元素的前景色                     | 1        |
| cursor              | 设置光标的样式                       | 1        |
| opacity             | 设置元素的透明度                     | 3        |
| table-layout        | 设置元素的布局为表格                 | 2        |
| caption-side        | 指定表格标题的位置                   | 2        |
| border-collapse     | 指定表格相邻单元格的边框的显示样式   | 2        |
| border-spacing      | 指定相邻单元格的边框的距离           | 2        |
| empty-cells         | 指定是否显示表格中的空单元格         | 2        |
| list-style          | 设置列表样式的简写属性               | 1        |
| list-style-image    | 指定列表项标记使用的图像             | 1        |
| list-style-position | 指定列表项标记相对于列表项内容的位置 | 1        |
| list-style-type     | 指定列表项标记的类型                 | 1        |

